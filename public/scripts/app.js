'use strict';/** * @ngdoc overview * @name jiantuoApp * @description * # jiantuoApp * * Main module of the application. */var app = angular.module('jiantuoApp', ['ngRoute','ngResource']);app.controller('AppCtrl',function($route,$location){    if($location.$$path===''){        $location.$$path='/dashboard';        $route.reload();    }});app.directive('btn',function(){    return {        scope:{},        restrict: 'E',        template: '<button type="button" class="btn {{class}}" id="{{id}}"><span class="glyphicon {{icon}}"></span>&nbsp;{{name}}</button>',        replace: true,        link:function(scope,element,attrs){            var cls='',id='',icon,name;            switch(attrs.sodoType){                case 'new':cls='btn-primary';id=attrs.sodoId||'sodo-btn-new';icon='glyphicon-plus';name="新建";break;                case 'edit':cls='btn-primary';id=attrs.sodoId||'sodo-btn-edit';icon='glyphicon-pencil';name="编辑";break;                case 'save':cls='btn-success';id=attrs.sodoId||'sodo-btn-save';icon='glyphicon-floppy-disk';name='保存';break;                case 'delete':cls='btn-danger';id=attrs.sodoId||'sodo-btn-delete';icon='glyphicon-trash';name="删除";break;            }            scope.class=cls;            scope.id=id;            scope.icon=icon;            scope.name=name;        }    };}).directive('liveQuery',['$timeout',function($timeout){    return {        restrict: 'A',        link:function(scope,element,attrs){            $timeout(function(){                eval('scope.'+attrs.liveQuery+'()');            });        }    }}]);app.config(function($routeProvider){    $routeProvider.        when('/dashboard',{controller:"DashboardCtrl",templateUrl:"/views/dashboard.html"}).        when('/project',{controller:"ProjectCtrl",templateUrl:"/views/project.html"}).        when('/customer',{controller:"CustomerCtrl",templateUrl:"/views/customer.html"}).        when('/salary',{controller:"SalaryCtrl",templateUrl:"/views/salary.html"}).        when('/cashflow',{controller:"CashflowCtrl",templateUrl:"/views/cashflow.html"}).        when('/account',{controller:"AccountCtrl",templateUrl:"/views/account.html"}).        when('/department',{controller:"DepartmentCtrl",templateUrl:"/views/department.html"})});app.run(['$rootScope', '$window', '$location', '$log', function ($rootScope, $window, $location, $log){    $rootScope.$on('$locationChangeStart', locationChangeStart);    $rootScope.$on('$routeChangeSuccess', routeChangeSuccess);    function locationChangeStart(event){        if($location.$$path==''){            event.preventDefault();            return;        }    }    function routeChangeSuccess(event){        $(document).ready(function(){            $('.sodo-sticky').sticky();        });    }}]);